<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Fetch-countires-api</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
</head>
<body>
    <h1>Json Data of Contries</h1>
    <button>CLICK ME TO MAKE A REQUEST</button>
    <p id="res"></p>
    <div id="div1">  
</div>
</body>
<script>
    var btn = document.querySelector("button");
    var res = document.querySelector("#res");

    btn.addEventListener("click",function(){
    var url = "https://restcountries.eu/rest/v2/all?fields=name";
    fetch(url,{method:"GET"})
    .then(handleErrors)
    .then(function(response){
        console.log("Everything is Fine");
        return response.json()
    })
    .then(function(data){
        for(let i=0 ; i<=data.length; i++){
            console.log(data[i].name);
            var para = document.createElement("p");
            var countries = data[i].name;
            var node = document.createTextNode(countries);
            para.appendChild(node);
            var element = document.getElementById("div1");
    element.appendChild(para);
        }

    I	})
    .catch(function(error){
        console.log(error);
        
    });
    });

    function handleErrors(response){
        if(!response.ok){
        throw Error(response.status);
        }
        return response;
    }
</script>
</html>